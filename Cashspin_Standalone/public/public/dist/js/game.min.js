var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};define("Handler",["require","exports"],function(t,e){"use strict";var i=function(){function t(t){this._object=t}return Object.defineProperty(t.prototype,"PhaserObject",{get:function(){return this._object},enumerable:!0,configurable:!0}),t.prototype.getPhaserObject=function(){return this._object},Object.defineProperty(t.prototype,"name",{get:function(){return this.PhaserObject.name+"Handler"},enumerable:!0,configurable:!0}),t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=function(t){function e(e){t.call(this,e)}return __extends(e,t),e}(i);e.ScriptHandler=n}),define("HiloCardHandler",["require","exports","scenemanager","Handler"],function(t,e,i,n){"use strict";!function(t){t[t.HI_LO_TAP=0]="HI_LO_TAP",t[t.HI_LO_CHOSEN=1]="HI_LO_CHOSEN",t[t.CARD_REVEALED=2]="CARD_REVEALED"}(e.HiloCardEvents||(e.HiloCardEvents={}));var a=e.HiloCardEvents,o=function(t){function e(e){t.call(this,e),this.OnCardEvents=new Phaser.Signal}return __extends(e,t),Object.defineProperty(e.prototype,"Orientation",{get:function(){return this._orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelectedOption",{get:function(){return this._selectedOption},enumerable:!0,configurable:!0}),e.prototype.init=function(t){this._orientation=t,this._skin=this.getPhaserObject(),this._skin.events.onDestroy.addOnce(this.onDestroyHandler,this),this._hiButton=this.getPhaserObject().getChildAt(0),this._lowButton=this.getPhaserObject().getChildAt(1),this._hiButton.inputEnabled=!0,this._lowButton.inputEnabled=!0,this._hiButton.events.onInputDown.addOnce(this.handleUpDownButtonTap,this),this._lowButton.events.onInputDown.addOnce(this.handleUpDownButtonTap,this)},e.prototype.playEnablingAnimation=function(){this._skin.animations.play("bgAnimationInit",30,!1),this._skin.events.onAnimationComplete.addOnce(this.enableHiLowButton,this)},e.prototype.playCardRevealingAnimation=function(){this._skin.animations.play("bgAnimationReveal");var t=this.getPhaserObject().getChildAt(2);t.events.onAnimationComplete.addOnce(this.handleCardRevealingAnimationComplete,this),t.animations.play("animation",30,!1,!0),t.visible=!0,i.default.game.time.events.repeat(700,0,this.showFinalSkin,this)},e.prototype.setFinalSkin=function(t,e,i,n){void 0===n&&(n=null),this._finalSkinFrameKey=e,this._finalSkinAtlasKey=t,n&&this._skin.animations.add("finalSkinAnimation",n,30)},e.prototype.addHighlight=function(t){var e;t?(e=this.getPhaserObject().getChildAt(4),e.visible=!0):(e=this.getPhaserObject().getChildAt(3),e.visible=!0)},e.prototype.handleCardRevealingAnimationComplete=function(){this.clearEmitter(),this.OnCardEvents.dispatch(this,a.CARD_REVEALED)},e.prototype.showFinalSkin=function(){this._hiButton.visible=this._lowButton.visible=!1,this._skin.loadTexture(this._finalSkinAtlasKey,this._finalSkinFrameKey),this._skin.animations.getAnimation("finalSkinAnimation")&&this._skin.animations.play("finalSkinAnimation",30)},e.prototype.clearEmitter=function(){e._revealingEmitter&&(e._revealingEmitter.kill(),e._revealingEmitter.destroy(!0,!1),e._revealingEmitter=null)},e.prototype.update=function(){},e.prototype.onDestroyHandler=function(){this.clearEmitter()},e.prototype.enableHiLowButton=function(){this._hiButton.visible=!0,this._lowButton.visible=!0,this.playHiorLoButtonHilightAnimation()},e.prototype.AutoPickHiLo=function(){var t=Phaser.Math.isEven(1+100*Math.random());this._isAutopicked=!0,this.handleUpDownButtonTap(t?this._hiButton:this._lowButton)},e.prototype.clearHilightAnimationsAndTweens=function(){this._hiButton.alpha=this._lowButton.alpha=0,null!=this._highlightTween&&this._highlightTween.stop()},e.prototype.playHiorLoButtonHilightAnimation=function(){this.clearHilightAnimationsAndTweens(),this._hiButton.alpha=1,this._lowButton.alpha=0,this._highlightTween=this.getPhaserObject().game.tweens.create(this),this._highlightTween.to({},500,Phaser.Easing.Default,!1,0,-1),this._highlightTween.onLoop.add(this.toggleHiLoHighlight,this),this._highlightTween.start()},e.prototype.toggleHiLoHighlight=function(){this.toggleHiButtonHighlight(),this.toggleLoButtonHighlight()},e.prototype.toggleHiButtonHighlight=function(){this._hiButton.alpha=this._hiButton.alpha>0?0:1},e.prototype.toggleLoButtonHighlight=function(){this._lowButton.alpha=this._lowButton.alpha>0?0:1},e.prototype.highlightHiButtonAfterSelection=function(){this.clearHilightAnimationsAndTweens(),this._hiButton.frameName="Hi_"+this.Orientation+"_sel",this._highlightTween=i.default.game.tweens.create(this),this._highlightTween.onComplete.addOnce(this.handleChoiceMade,this),this._highlightTween.to({},200,Phaser.Easing.Default,!0,0,6).onRepeat.add(this.toggleHiButtonHighlight,this)},e.prototype.highlightLoButtonAfterSelection=function(){this.clearHilightAnimationsAndTweens(),this._lowButton.frameName="Lo_"+this.Orientation+"_sel",this._highlightTween=i.default.game.tweens.create(this),this._highlightTween.onComplete.addOnce(this.handleChoiceMade,this),this._highlightTween.to({},200,Phaser.Easing.Default,!0,0,6).onRepeat.add(this.toggleLoButtonHighlight,this)},e.prototype.handleChoiceMade=function(t,i){this._hiButton.alpha=this.SelectedOption==e.HI?1:0,this._lowButton.alpha=this.SelectedOption==e.LO?1:0,this.OnCardEvents.dispatch(this,a.HI_LO_CHOSEN)},e.prototype.handleUpDownButtonTap=function(t){t===this._hiButton?(this._selectedOption=e.HI,this.highlightHiButtonAfterSelection()):(this._selectedOption=e.LO,this.highlightLoButtonAfterSelection()),this._hiButton.inputEnabled=!1,this._lowButton.inputEnabled=!1,this.OnCardEvents.dispatch(this,a.HI_LO_TAP)},e.HI=1,e.LO=0,e}(n.default);e.HiloCardHandler=o}),define("RandomHiLoCardGenerator",["require","exports"],function(t,e){"use strict";var i=function(){function t(){this.numberOfCardsInTheGame=5,this.totalNumberOfCards=52,this.init()}return t.prototype.init=function(){var t=[n.C,n.D,n.H,n.S],e=[a.$2,a.$3,a.$4,a.$5,a.$6,a.$7,a.$8,a.$9,a.$T,a.$J,a.$Q,a.$K,a.$A];this.totalNumberOfCards=t.length*e.length,this.cardsInfo=new Array;for(var i=0;i<e.length;i++)for(var s=0;s<t.length;s++){var h=new r(new o(t[s],e[i]));this.cardsInfo.push(h)}this.bottomLimit=this.numberOfCardsInTheGame*t.length,this.topLimit=this.totalNumberOfCards-this.numberOfCardsInTheGame*t.length},t.prototype.getFirstCard=function(){var t=this.getARandomIndexBetweenTheLimits(this.bottomLimit,this.topLimit);return this.cardsInfo[t].selected=!0,this.lastIndex=t,this.bottomLimit-=4,this.topLimit+=4,this.setSelectedForAllSkins(this.cardsInfo[t].card.Rank),this.cardsInfo[t].card},t.prototype.getNextLo=function(){var t=this.getARandomIndexBetweenTheLimits(this.bottomLimit,this.lastIndex);return t<0&&(t=this.bottomLimit),this.cardsInfo[t].selected=!0,this.lastIndex=t,this.bottomLimit-=4,this.topLimit+=4,this.setSelectedForAllSkins(this.cardsInfo[t].card.Rank),this.cardsInfo[t].card},t.prototype.getNextHi=function(){var t=this.getARandomIndexBetweenTheLimits(this.lastIndex,this.topLimit);return t<0&&(t=this.topLimit),this.cardsInfo[t].selected=!0,this.lastIndex=t,this.bottomLimit-=4,this.topLimit+=4,this.setSelectedForAllSkins(this.cardsInfo[t].card.Rank),this.cardsInfo[t].card},t.prototype.setSelectedForAllSkins=function(t){for(var e=0;e<this.cardsInfo.length;e++)this.cardsInfo[e].card.Rank===t&&(this.cardsInfo[e].selected=!0)},t.prototype.getARandomIndexBetweenTheLimits=function(t,e){var i=new Array;if(e-t<=0)return console.log("invalid bounds left and right!"),-1;for(var n=t;n<e;n++)this.cardsInfo[n].selected||i.push(this.cardsInfo[n]);var a=Math.random()*i.length;return this.cardsInfo.indexOf(i[parseInt(a.toString())])},t}();e.RandomHiLoCardGenerator=i,function(t){t[t.C=0]="C",t[t.D=1]="D",t[t.H=2]="H",t[t.S=3]="S"}(e.CardSkin||(e.CardSkin={}));var n=e.CardSkin;!function(t){t[t.$2=0]="$2",t[t.$3=1]="$3",t[t.$4=2]="$4",t[t.$5=3]="$5",t[t.$6=4]="$6",t[t.$7=5]="$7",t[t.$8=6]="$8",t[t.$9=7]="$9",t[t.$T=8]="$T",t[t.$J=9]="$J",t[t.$Q=10]="$Q",t[t.$K=11]="$K",t[t.$A=12]="$A"}(e.CardRank||(e.CardRank={}));var a=e.CardRank,o=function(){function t(t,e){this._skin=t,this._rank=e}return Object.defineProperty(t.prototype,"Skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rank",{get:function(){return this._rank},enumerable:!0,configurable:!0}),t}();e.Card=o;var r=function(){function t(t){this._card=t,this.selected=!1}return Object.defineProperty(t.prototype,"card",{get:function(){return this._card},enumerable:!0,configurable:!0}),t}();e.CardHelper=r}),define("hilomain",["require","exports","scenemanager","HiloCardHandler","RandomHiLoCardGenerator"],function(t,e,i,n,a){"use strict";var o=function(t){function e(){t.call(this),this._cardGen=new a.RandomHiLoCardGenerator,this._cards=new Array,this._nextCard=0,this._currentScore=0,this._numberOfWinningCards=4,this._randomWinningCardIndices=new Array}return __extends(e,t),e.prototype.init=function(t){},e.prototype.Start=function(){for(i.log.info("Start of Hilo Main"),i.default.game.world.bringToTop(i.default.getGroupByTag("toplevel1")),this._scoreTweenText=i.default.getGameObjectByName("scoreTweenText"),this._scoreText=i.default.getGameObjectByName("scoreText"),this._winAnimation=i.default.getGameObjectByName("WinAnimation"),this._autoPickText=i.default.getGameObjectByName("autopickText"),this._settings=i.default.game.cache.getJSON("settings",!1),this._muteToggleButton=i.default.getGameObjectByName("muteButton"),this._predictMessageText=i.default.getGameObjectByName("PredictCardText"),r.PopulateValues(),r.numberOfWinningCardsMin===r.numberOfWinningCardsMax?this._numberOfWinningCards=r.numberOfWinningCardsMax:this._numberOfWinningCards=Phaser.Math.between(r.numberOfWinningCardsMin,r.numberOfWinningCardsMax),this._randomWinningCardIndices=[1,2,3,4],r.includeWrongPrediction&&Phaser.ArrayUtils.shuffle(this._randomWinningCardIndices);this._randomWinningCardIndices.length>this._numberOfWinningCards;)this._randomWinningCardIndices.pop();this._autoPickText.text=this._scoreTweenText.text="",this._scoreText.text="";var t=i.default.game.add.emitter(this._winAnimation.position.x,this._winAnimation.position.y,100);t.particleClass=s,t.makeParticles("animation_atlas","CoinAnimation0000"),t.setXSpeed(-350,350),t.setYSpeed(-150,500),t.setScale(2,2.5,2,2.5,30),t.gravity=200,t.setAlpha(1,0,5500,Phaser.Easing.Circular.In),this._coinAnimationEmitter=t;for(var e=1;e<=5;e++){var a=new n.HiloCardHandler(i.default.getGameObjectByName("hilocard"+e.toString()));Phaser.Math.isEven(e-1)?a.init(r.CARD_ORIENTATION_LEFT):a.init(r.CARD_ORIENTATION_RIGHT),a.OnCardEvents.add(this.HandleHiloCardEvent,this),a.PhaserObject.alpha=0,this._cards.push(a)}this._muteToggleButton.visible=r.ShouldDisplayMute,this._muteToggleButton.inputEnabled=!0,this._muteToggleButton.events.onInputDown.add(this.toggleMute,this),r.IsMuted=!r.IsMuted,i.default.ToggleAudio(),this.toggleMute(),this.ShowIntroScreen()},e.prototype.ShowIntroScreen=function(){var t,e,n=i.default.getGameObjectByName("IntroScreen").getChildAt(0);i.default.getGameObjectByName("IntroScreen").visible=!0,n.visible=!0,n.inputEnabled=!1,n.onInputUp.addOnce(this.HandlePlayButtonClick,this),i.OfferManager.IsWebView&&i.default.game.time.events.repeat(1500,0,this.showExitButton,this),t=i.default.getGameObjectByName("IntroScreen").getChildAt(1),e=i.default.game.tweens.create(t).to({y:t.y+20},1500,Phaser.Easing.Sinusoidal.InOut,!1,0,1e4,!0),e.start()},e.prototype.HandleButtonClick_Dummy=function(){},e.prototype.BonusGameState=function(t){if(t==i.BonusGameState.beginGameAcked){var e=void 0,n=void 0;r.willIMakeIt=this.getOfferConfigs().WinningPayLine.Value>0,r.usePercentageScore?(r.prizePerAttempt=100/this._numberOfWinningCards,r.prizePerAttemptFormated=this.getFormatedPercentage(r.prizePerAttempt)):(r.prizePerAttempt=this.getOfferConfigs().WinningPayLine.Value/this._numberOfWinningCards,r.prizePerAttemptFormated=this.getFormatedPrize(r.prizePerAttempt)),r.willIMakeIt||(this._randomWinningCardIndices=[]),this._predictMessageText.text=this._settings.strings.predictMessageFormat.replace("{0}",this._numberOfWinningCards),this._predictMessageText.text=this._predictMessageText.text.replace("{1}","4"),e=i.default.getGameObjectByName("IntroScreen").getChildAt(0),n=i.default.game.tweens.create(e.scale),n.to({x:1.25,y:1.25},500,Phaser.Easing.Back.InOut,!0,0,1e4,!0),e.inputEnabled=!0,n.start()}t==i.BonusGameState.endGameAcked&&this.showFinalPopup()},e.prototype.HandlePlayButtonClick=function(){r.usePercentageScore?this._scoreText.text=this.getFormatedPercentage(0):this._scoreText.text=this.getFormatedPrize(0),i.default.getGameObjectByName("IntroScreen").destroy(!0),this._backgroundMusic=i.default.game.sound.play("BgLoop",.5,!0),this._scoreText.visible=!0,this.startCardsEntryTween(),i.default.getGameObjectByName("exitButton").visible=!1,this._predictMessageText.visible=!0,this._predictTextTween=i.default.game.tweens.create(this._predictMessageText.scale).to({x:1.1,y:1.1},500,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0)},e.prototype.startCardsEntryTween=function(){for(var t=null,e=0;e<this._cards.length;e++){var n=this._cards[e],a=n.PhaserObject.position.x;t=i.default.game.tweens.create(n.PhaserObject),n.PhaserObject.alpha=0,n.PhaserObject.position.x=1700,n.PhaserObject.rotation=-1.57,t.to({x:a},850,Phaser.Easing.Sinusoidal.Out,!1),t.delay(200*e),t.start(),t.onStart.addOnce(function(){i.default.game.sound.play("swish1")},this),t=i.default.game.tweens.create(n.PhaserObject).to({alpha:1,rotation:0},500,Phaser.Easing.Linear.None,!1),t.delay(250*e),t.start()}t.onComplete.addOnce(this.RevealTheFirstNonWinningCard,this)},e.prototype.startCardsExitTween=function(){for(var t=null,e=0;e<this._cards.length;e++){var n=this._cards[e];t=i.default.game.tweens.create(n.PhaserObject),t.to({y:1e3,rotation:6.28},1500,Phaser.Easing.Sinusoidal.In,!1,500*Math.random()),t.start()}t.onComplete.addOnce(this.onCardsExisted,this)},e.prototype.onCardsExisted=function(){i.OfferManager.IsWebView&&i.default.game.time.events.repeat(3e3,0,this.showExitButton,this),i.OfferManager.EndGame(0,!0,-1)},e.prototype.toggleMute=function(){i.default.ToggleAudio(),r.IsMuted=!r.IsMuted,r.IsMuted?this._muteToggleButton.frameName="Mute":this._muteToggleButton.frameName="UnMute"},e.prototype.showFinalGameMessage=function(){var t;this._scoreText.alpha=this._winAnimation.alpha=this._coinAnimationEmitter.alpha=0,this._scoreText.y+=15,this._winAnimation.y+=15,this._coinAnimationEmitter.y+=15,this._currentScore=this.getOfferConfigs().WinningPayLine.Value,t=i.default.getGameObjectByName("scorebg"),t.y+=15,i.default.getGroupByTag("toplevel1").addChild(this._winAnimation),i.default.getGroupByTag("toplevel1").addChild(t),i.default.getGroupByTag("toplevel1").addChild(this._scoreText),i.default.game.tweens.create(this._scoreText).to({alpha:1},500,Phaser.Easing.Bounce.Out,!0),i.default.game.tweens.create(t).to({alpha:1},500,Phaser.Easing.Bounce.Out,!0),i.default.game.tweens.create(this._winAnimation).to({alpha:1},500,Phaser.Easing.Bounce.Out,!0),i.default.game.tweens.create(this._coinAnimationEmitter).to({alpha:1},500,Phaser.Easing.Bounce.Out,!0),r.willIMakeIt?(this._coinAnimationEmitter.setXSpeed(-450,450),this._coinAnimationEmitter.setYSpeed(-200,250),this._coinAnimationEmitter.minParticleScale=1,this._coinAnimationEmitter.minParticleScale=2,this._coinAnimationEmitter.setAlpha(1,0,3e3,Phaser.Easing.Circular.In),this._coinAnimationEmitter.start(!1,2500,50,500),this.startScoreCountingUp(this.getOfferConfigs().WinningPayLine.Value,0,4e3,this.onScoreCountingUpdate,this.playScoreScaleUpTweenGameOver),i.default.game.sound.play("shortrollup").onStop.addOnce(function(){i.default.game.sound.play("hornsoutro")},this)):(i.default.game.sound.play("hornsoutro2"),this.showFinalServerMessage()),this._backgroundMusic.stop()},e.prototype.showFinalServerMessage=function(){i.default.ToggleGameEndMessage(!0)},e.prototype.getOfferConfigs=function(){return i.OfferManager.IsStandalone?r.demoOfferConfigs:i.OfferManager.OfferConfiguration},e.prototype.showFinalPopup=function(){var t=i.default.getGameObjectByName("FinalPopup"),e=i.default.game.tweens.create(t),n="",a=i.default.getGameObjectByName("FinalPopupText");t.visible=!0,t.inputEnabled=!0,this._predictTextTween.stop(),this._predictMessageText.visible=!1,a.alpha=0,n=r.willIMakeIt?r.gameWinMessageFormat.replace("{prize}",this.getOfferConfigs().WinningPayLine.FormattedPrize):r.gameLoseMessageFormat,n=n.replace("{playername}",this.getCropedPlayerName(12)),a.text=n,e.from({alpha:0},500,Phaser.Easing.Sinusoidal.Out,!0),e.onComplete.addOnce(this.showFinalGameMessage,this)},e.prototype.showCoinExplossion=function(){this._coinAnimationEmitter.kill(),this._coinAnimationEmitter.start(!0,3500,10,75)},e.prototype.RevealTheFirstNonWinningCard=function(){var t=new Array,e=this._cardGen.getFirstCard();t.push(e);for(var n=1;n<1;n++)e=Phaser.Math.between(0,100)%2==0?this._cardGen.getNextHi():this._cardGen.getNextLo(),t.push(e);for(var n=0;n<t.length;n++)this._cards[n].setFinalSkin("objects_atlas",this.getFrameKeyForCard(this._cards[n].Orientation,t[n]),"animation_atlas",this.getAnimationFramesForCard(this._cards[n].Orientation,t[n])),i.default.game.time.events.repeat(300*n,0,this.RevealTheCard,this,this._cards[n]);this._nextCard=1},e.prototype.RevealTheCard=function(t){t.playCardRevealingAnimation(),i.default.game.sound.play("Glittersfx")},e.prototype.HandleHiloCardEvent=function(t,e){var a=this._cards.indexOf(t);switch(e){case n.HiloCardEvents.HI_LO_TAP:this.clearAutopick(),t.SelectedOption===n.HiloCardHandler.HI?i.default.game.sound.play("hisound"):i.default.game.sound.play("losound");break;case n.HiloCardEvents.HI_LO_CHOSEN:this.clearAutopick();var o=void 0;o=r.willIMakeIt&&this._randomWinningCardIndices.indexOf(a)>=0?t.SelectedOption===n.HiloCardHandler.HI?this._cardGen.getNextHi():this._cardGen.getNextLo():t.SelectedOption===n.HiloCardHandler.HI?this._cardGen.getNextLo():this._cardGen.getNextHi(),t.setFinalSkin("objects_atlas",this.getFrameKeyForCard(t.Orientation,o),"animation_atlas",this.getAnimationFramesForCard(t.Orientation,o)),t.playCardRevealingAnimation(),i.default.game.sound.play("Glittersfx");break;case n.HiloCardEvents.CARD_REVEALED:if(this._randomWinningCardIndices.indexOf(a)>=0){this._randomWinningCardIndices.splice(this._randomWinningCardIndices.indexOf(a),1);var s=this._cards[this._nextCard-1],h=i.default.getGameObjectByName("scorebg");this._scoreTweenText.position.set(s.PhaserObject.x,s.PhaserObject.y),this._scoreTweenText.visible=!0,this._scoreTweenText.alpha=0,this._scoreTweenText.text=r.prizePerAttemptFormated;var l=h.x-220;s.PhaserObject.x>h.x-50&&(l=h.x+220);var c=i.default.game.tweens.create(this._scoreTweenText).to({x:l,y:h.y},500,Phaser.Easing.Sinusoidal.InOut,!0,200);i.default.game.tweens.create(this._scoreTweenText).to({alpha:1},200,Phaser.Easing.Default,!0);c.onComplete.addOnce(this.FinishedRevealingPercent,this),t.addHighlight(!0)}else a>0&&t.addHighlight(!1),this.enableTheNextCard();break;default:console.log("invalid type found : "+e+"!")}},e.prototype.FinishedRevealingPercent=function(){var t=i.default.getGameObjectByName("scorebg"),e=i.default.game.tweens.create(this._scoreTweenText).to({x:t.x},500,Phaser.Easing.Linear.None,!0,500),n=i.default.game.tweens.create(this._scoreTweenText).to({y:t.y-100},250,Phaser.Easing.Sinusoidal.Out,!0,500),a=i.default.game.tweens.create(this._scoreTweenText).to({alpha:0},100,Phaser.Easing.Default,!1);n.onComplete.addOnce(this.FinishedUpperArc,this),a.onComplete.addOnce(this.playCoinAnimationAfterScoreTween,this),e.chain(a)},e.prototype.FinishedUpperArc=function(){var t=i.default.getGameObjectByName("scorebg");i.default.game.tweens.create(this._scoreTweenText).to({y:t.y},250,Phaser.Easing.Sinusoidal.In,!0)},e.prototype.clearAutopick=function(){i.default.game.time.events.remove(this._autoPickTimerEvent),this._autoPickText.visible=!1},e.prototype.enableTheNextCard=function(){1==this._nextCard||this._randomWinningCardIndices.length>0||!r.willIMakeIt&&r.includeWrongPrediction&&this._cards.length-this._nextCard>=this._numberOfWinningCards?(this._cards[this._nextCard].playEnablingAnimation(),this._nextCard++,this._autoPickTimeLeft=r.waitToAutopick/1e3,this._autoPickTimerEvent=i.default.game.time.events.repeat(1e3,r.waitToAutopick/1e3,this.onAutoPickTimerEvent,this),i.default.getGameObjectByName("LogoAnimation").animations.play("Animation",30),i.default.game.sound.play("HiLoSpin")):this.startCardsExitTween()},e.prototype.playCoinAnimationAfterScoreTween=function(){this._scoreTweenText.visible=!1,this._winAnimation.play("Win"+(this._nextCard-1)+"Animation",30),this._winAnimation.visible=!0,this.showCoinExplossion(),this.startScoreCountingUp(this._currentScore+r.prizePerAttempt,this._currentScore,1500,this.onScoreOrPercentageCountingUpdate,this.playScoreScaleUpTweenGamePlay),this._currentScore+=r.prizePerAttempt,i.default.game.sound.play("CoinCountup1c")},e.prototype.startScoreCountingUp=function(t,e,n,a,o){var s=this;void 0===e&&(e=this._countingScore),void 0===n&&(n=1500);var h=i.default.game.tweens.create(this);this._countingScore=e,h.to({_countingScore:t},n,Phaser.Easing.Default,!1),h.onComplete.addOnce(function(){s._countingScore=s._currentScore,r.usePercentageScore?s._scoreText.text=s.getFormatedPercentage(s._currentScore):s._scoreText.text=s.getFormatedPrize(s._currentScore)},this),a&&h.onUpdateCallback(a,this),o&&h.onComplete.addOnce(o,this),h.start(),this._scoreCountingTween=h},e.prototype.onScoreOrPercentageCountingUpdate=function(){r.usePercentageScore?this._scoreText.text=this.getFormatedPercentage(this._countingScore):this._scoreText.text=this.getFormatedPrize(this._countingScore)},e.prototype.onScoreCountingUpdate=function(){this._scoreText.text=this.getFormatedPrize(this._countingScore)},e.prototype.getFormatedPercentage=function(t,e){return void 0===e&&(e=0),(Math.round(100*t)/100).toFixed(e)+"%"},e.prototype.getFormatedPrize=function(t){var e=(Math.round(100*t)/100).toFixed(2);return this.GetCurrencyStringFromNumber(parseFloat(e))},e.prototype.GetCurrencyStringFromNumber=function(t){var e="",n="";i.OfferManager.IsStandalone?(e="en-US",n="USD"):(e=i.OfferManager.OfferConfiguration.Locale,n=i.OfferManager.OfferConfiguration.CurrencyCode);var a=t.toLocaleString(e,{style:"currency",currency:n});if("ZAR"==n){if(a.length>1&&" "!=a[1]){var o=a[0];a=o+" "+a.substring(1)}}else"PHP"==n?a=" "==a[3]?"Php"+a.substring(4):"Php"+a.substring(3):"CNY"==n||"JPY"==n?a="¥"+a.substring(1):"CHF"==n?a=a.substring(4)+" fr.":"THB"==n&&(a="฿"+a.substring(3));return a},e.prototype.playScoreScaleUpTweenGamePlay=function(){i.default.game.tweens.create(this._scoreText.scale).to({x:2,y:2},300,Phaser.Easing.Circular.Out,!0,0,0,!0).onComplete.addOnce(this.enableTheNextCard,this)},e.prototype.playScoreScaleUpTweenGameOver=function(){var t=i.default.getGameObjectByName("FinalPopupText");i.default.game.tweens.create(t).to({alpha:1},500,Phaser.Easing.Sinusoidal.Out,!0),this._scoreText.text=this.getOfferConfigs().WinningPayLine.FormattedPrize;var e=i.default.game.tweens.create(this._scoreText.scale).to({x:2,y:2},300,Phaser.Easing.Circular.Out,!1,0,0,!0);e.onComplete.addOnce(this.showFinalServerMessage,this),e.start()},e.prototype.onAutoPickTimerEvent=function(){this._autoPickTimeLeft--,this._autoPickTimeLeft<=0?this._cards[this._nextCard-1].AutoPickHiLo():this._autoPickTimeLeft<r.waitToShowAutoPickText/1e3&&(this._autoPickText.visible=!0,this._autoPickText.text=this._settings.strings.autopickFormat.replace("{0}",this._autoPickTimeLeft.toString()),i.default.game.tweens.create(this._autoPickText).from({alpha:0,y:this._autoPickText.y-10},200,Phaser.Easing.Default,!0))},e.prototype.getFrameKeyForCard=function(t,e){var i=a.CardSkin[e.Skin],n=a.CardRank[e.Rank];return n=n.replace("$",""),i+n+(t!==r.CARD_ORIENTATION_STRAIGHT?t:"")},e.prototype.getAnimationFramesForCard=function(t,e){return null},e.prototype.showExitButton=function(){var t=i.default.getGameObjectByName("exitButton"),e=i.default.game.tweens.create(t.scale);t.visible=!0,e.from({x:0,y:0},500,Phaser.Easing.Bounce.Out,!0)},e.prototype.getCropedPlayerName=function(t){var e,i;return e=this.getOfferConfigs().PlayerInfo.FirstName,i=this.getOfferConfigs().PlayerInfo.LastName,(e+" "+i).length>t-2?e+" "+i.charAt(0):e+""+i},e.prototype.Render=function(){},e.prototype.Update=function(){i.OfferManager.OfferConfiguration},e.prototype.HandleExitButtonClick=function(){i.default.game.input.mouse.enabled=!1,i.OfferManager.ExitGame()},e}(i.Component);e.HiloMain=o;var r=function(){function t(){}return t.PopulateValues=function(){var e=i.default.game.cache.getJSON("settings",!1);t.waitToAutopick=1e3*e.SecondsToWaitToAutopick,t.waitToShowAutoPickText=1e3*e.SecondsToWaitToShowAutopickText,t.gameWinMessageFormat=e.strings.gameWinMessageFormat,t.closeBrowserMessage=e.strings.closeBrowserMessage,t.gameLoseMessageFormat=e.strings.gameLoseMessageFormat,t.ShouldDisplayMute=e.MuteButtonDisplayed,t.demoOfferConfigs=e.demoOfferConfigs,t.usePercentageScore=e.UsePercentageScore,t.numberOfWinningCardsMin=e.NumberOfWinningCardsMin,t.numberOfWinningCardsMax=e.NumberOfWinningCardsMax,t.includeWrongPrediction=e.IncludeWrongPrediction},t.CARD_ORIENTATION_LEFT="L",t.CARD_ORIENTATION_RIGHT="R",t.CARD_ORIENTATION_STRAIGHT="S",t.ScoreCountingUpTime=1500,t.numberOfWinningCardsMin=4,t.numberOfWinningCardsMax=4,t.IsMuted=!1,t.prizePerAttempt=1,t.prizePerAttemptFormated="$1.00",t.ShouldDisplayMute=!0,t.waitToAutopick=1e4,t.waitToShowAutoPickText=5e3,t.usePercentageScore=!1,t}();e.HiloGameSettings=r;var s=function(t){function e(i,n,a,o,r){t.call(this,i,n,a,"animation_atlas"),this.animations.add("an",e.animFrames,3,!0)}return __extends(e,t),e.prototype.onEmit=function(){var t=this.animations.play("an",30,!0);t.speed=15+15*Math.random(),t.frame=1+Math.floor(Math.random()*t.frameTotal/2)},e.animFrames=Phaser.Animation.generateFrameNames("CoinAnimation",0,19,"",4),e}(Phaser.Particle)});